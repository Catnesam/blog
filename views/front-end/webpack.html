<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpackæ€»ç»“ | Little Sen`s Blog</title>
    <meta name="description" content="è¿å¾€æ— æ·¹ç‰©ï¼Œå¹´é€è§‰å·²å‚¬">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="https://infinitypro-img.infinitynewtab.com/custom-icon/8001de1jd3n68lbfnxxt564xvb0vl5.png?imageMogr2/thumbnail/240x/format/webp/blur/1x0/quality/100|imageslim">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <script language="javascript" type="text/javascript" src="https://cdn.staticfile.org/jquery/1.7.2/jquery.min.js"></script>
  <script language="javascript" type="text/javascript" src="/blog/js/MouseClickEffect.js"></script>
    
    <link rel="preload" href="/blog/assets/css/0.styles.8f202f30.css" as="style"><link rel="preload" href="/blog/assets/js/app.90f6b5bc.js" as="script"><link rel="preload" href="/blog/assets/js/5.e94a5d1b.js" as="script"><link rel="preload" href="/blog/assets/js/1.d02e55e0.js" as="script"><link rel="preload" href="/blog/assets/js/2.fb73c2a5.js" as="script"><link rel="preload" href="/blog/assets/js/28.ce003a28.js" as="script"><link rel="preload" href="/blog/assets/js/19.1644d39f.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.968640e9.js"><link rel="prefetch" href="/blog/assets/js/11.ae70ab66.js"><link rel="prefetch" href="/blog/assets/js/12.3ee7c46c.js"><link rel="prefetch" href="/blog/assets/js/13.923b2362.js"><link rel="prefetch" href="/blog/assets/js/14.e962a3b3.js"><link rel="prefetch" href="/blog/assets/js/15.fd18d1a0.js"><link rel="prefetch" href="/blog/assets/js/16.dd817b1c.js"><link rel="prefetch" href="/blog/assets/js/17.21c9c99c.js"><link rel="prefetch" href="/blog/assets/js/18.41c47e63.js"><link rel="prefetch" href="/blog/assets/js/20.2375326a.js"><link rel="prefetch" href="/blog/assets/js/21.fb946aeb.js"><link rel="prefetch" href="/blog/assets/js/22.9273c105.js"><link rel="prefetch" href="/blog/assets/js/23.106e8c8f.js"><link rel="prefetch" href="/blog/assets/js/24.4caa6ec0.js"><link rel="prefetch" href="/blog/assets/js/25.4f7232a2.js"><link rel="prefetch" href="/blog/assets/js/26.02ed9290.js"><link rel="prefetch" href="/blog/assets/js/27.75a99f1d.js"><link rel="prefetch" href="/blog/assets/js/29.2a9659b2.js"><link rel="prefetch" href="/blog/assets/js/30.7edc3da3.js"><link rel="prefetch" href="/blog/assets/js/31.ab914340.js"><link rel="prefetch" href="/blog/assets/js/32.36dc67f8.js"><link rel="prefetch" href="/blog/assets/js/33.e7143817.js"><link rel="prefetch" href="/blog/assets/js/34.b1a3f447.js"><link rel="prefetch" href="/blog/assets/js/35.529adaef.js"><link rel="prefetch" href="/blog/assets/js/36.530f2f4a.js"><link rel="prefetch" href="/blog/assets/js/37.016bb00b.js"><link rel="prefetch" href="/blog/assets/js/38.12d4faea.js"><link rel="prefetch" href="/blog/assets/js/39.f6ee585d.js"><link rel="prefetch" href="/blog/assets/js/40.77920430.js"><link rel="prefetch" href="/blog/assets/js/41.d9fbd035.js"><link rel="prefetch" href="/blog/assets/js/42.8b8b5fb9.js"><link rel="prefetch" href="/blog/assets/js/43.9de832b1.js"><link rel="prefetch" href="/blog/assets/js/44.d55c523e.js"><link rel="prefetch" href="/blog/assets/js/45.858e38a1.js"><link rel="prefetch" href="/blog/assets/js/46.6e6189e3.js"><link rel="prefetch" href="/blog/assets/js/47.5714a3ef.js"><link rel="prefetch" href="/blog/assets/js/48.95359583.js"><link rel="prefetch" href="/blog/assets/js/49.1f80447f.js"><link rel="prefetch" href="/blog/assets/js/50.89480503.js"><link rel="prefetch" href="/blog/assets/js/51.652ed9ea.js"><link rel="prefetch" href="/blog/assets/js/52.0a3d2604.js"><link rel="prefetch" href="/blog/assets/js/53.174f4423.js"><link rel="prefetch" href="/blog/assets/js/54.b4efef07.js"><link rel="prefetch" href="/blog/assets/js/55.69ae0def.js"><link rel="prefetch" href="/blog/assets/js/56.28ab7d3f.js"><link rel="prefetch" href="/blog/assets/js/57.d452bbb2.js"><link rel="prefetch" href="/blog/assets/js/58.c1cf6cb1.js"><link rel="prefetch" href="/blog/assets/js/59.d26693f7.js"><link rel="prefetch" href="/blog/assets/js/6.a64d608f.js"><link rel="prefetch" href="/blog/assets/js/60.62ce43f3.js"><link rel="prefetch" href="/blog/assets/js/61.9b44aeaf.js"><link rel="prefetch" href="/blog/assets/js/62.bc9bbabe.js"><link rel="prefetch" href="/blog/assets/js/63.e683da94.js"><link rel="prefetch" href="/blog/assets/js/64.b8a945f1.js"><link rel="prefetch" href="/blog/assets/js/7.c4bb8b30.js"><link rel="prefetch" href="/blog/assets/js/8.4976df0f.js"><link rel="prefetch" href="/blog/assets/js/9.0861706e.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.904de923.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.8f202f30.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container no-sidebar" data-v-0b87bb44><div data-v-0b87bb44><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-0b87bb44 data-v-0b87bb44><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-73c95a87 data-v-0b87bb44 data-v-0b87bb44><h3 class="title" style="display:none;" data-v-73c95a87 data-v-73c95a87>Little Sen`s Blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-73c95a87 data-v-73c95a87><input type="password" value="" data-v-73c95a87> <span data-v-73c95a87>Konck! Knock!</span> <button data-v-73c95a87>OK</button></label> <div class="footer" style="display:none;" data-v-73c95a87 data-v-73c95a87><span data-v-73c95a87><i class="iconfont reco-theme" data-v-73c95a87></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-73c95a87>vuePress-theme-reco</a></span> <span data-v-73c95a87><i class="iconfont reco-copyright" data-v-73c95a87></i> <a data-v-73c95a87><span data-v-73c95a87>Little Sen</span>
          Â Â 
          <span data-v-73c95a87>2020 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-0b87bb44><header class="navbar" data-v-0b87bb44><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Little Sen`s Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/index.html" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/å‰ç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/æ€»ç»“/" class="nav-link"><i class="iconfont undefined"></i>
  æ€»ç»“
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/åç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      å…¶å®ƒ
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ProjectsğŸˆ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/project.html" class="nav-link"><i class="iconfont undefined"></i>
  My Project
</a></li></ul></li><li class="dropdown-item"><h4>Common sitesğŸˆ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  React.js
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Stackoverflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://leetcode-cn.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  LeetCode
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Vue.js
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.bootcdn.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  BootCDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Linuxå‘½ä»¤å¤§å…¨
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div><div class="nav-item"><a href="/blog/about/" class="nav-link"><i class="iconfont reco-message"></i>
  å…³äºæˆ‘
</a></div> <a href="https://github.com/Catnesam/blog" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask" data-v-0b87bb44></div> <aside class="sidebar" data-v-0b87bb44><div class="personal-info-wrapper" data-v-7e653f02><img src="/blog/vuepress/head-fish.jpg" alt="author-avatar" class="personal-img" data-v-7e653f02> <h3 class="name" data-v-7e653f02>
    Little Sen
  </h3> <div class="num" data-v-7e653f02><div data-v-7e653f02><h3 data-v-7e653f02>39</h3> <h6 data-v-7e653f02>æ–‡ç« </h6></div> <div data-v-7e653f02><h3 data-v-7e653f02>38</h3> <h6 data-v-7e653f02>æ ‡ç­¾</h6></div></div> <hr data-v-7e653f02></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/index.html" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/å‰ç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/æ€»ç»“/" class="nav-link"><i class="iconfont undefined"></i>
  æ€»ç»“
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/åç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      å…¶å®ƒ
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ProjectsğŸˆ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/project.html" class="nav-link"><i class="iconfont undefined"></i>
  My Project
</a></li></ul></li><li class="dropdown-item"><h4>Common sitesğŸˆ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  React.js
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Stackoverflow
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://leetcode-cn.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  LeetCode
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Vue.js
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.bootcdn.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  BootCDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Linuxå‘½ä»¤å¤§å…¨
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´çº¿
</a></div><div class="nav-item"><a href="/blog/about/" class="nav-link"><i class="iconfont reco-message"></i>
  å…³äºæˆ‘
</a></div> <a href="https://github.com/Catnesam/blog" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-73c95a87 data-v-0b87bb44><h3 class="title" style="display:none;" data-v-73c95a87 data-v-73c95a87>Webpackæ€»ç»“</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-73c95a87 data-v-73c95a87><input type="password" value="" data-v-73c95a87> <span data-v-73c95a87>Konck! Knock!</span> <button data-v-73c95a87>OK</button></label> <div class="footer" style="display:none;" data-v-73c95a87 data-v-73c95a87><span data-v-73c95a87><i class="iconfont reco-theme" data-v-73c95a87></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-73c95a87>vuePress-theme-reco</a></span> <span data-v-73c95a87><i class="iconfont reco-copyright" data-v-73c95a87></i> <a data-v-73c95a87><span data-v-73c95a87>Little Sen</span>
          Â Â 
          <span data-v-73c95a87>2020 - </span>
          2021
        </a></span></div></div> <div data-v-0b87bb44><main class="page"><!----> <div class="page-title" style="display:none;"><h1>Webpackæ€»ç»“</h1> <hr> <div data-v-7b2e794a><i class="iconfont reco-account" data-v-7b2e794a><span data-v-7b2e794a>Little Sen</span></i> <i class="iconfont reco-date" data-v-7b2e794a><span data-v-7b2e794a>2021-02-25</span></i> <i class="iconfont reco-eye" data-v-7b2e794a><span id="/blog/views/front-end/webpack.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-7b2e794a><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-7b2e794a><span class="tag-item" data-v-7b2e794a>
      webpack
    </span><span class="tag-item" data-v-7b2e794a>
      å‰ç«¯æ¨¡å—åŒ–
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="ä¸€ã€webpack-ç®€ä»‹"><a href="#ä¸€ã€webpack-ç®€ä»‹" class="header-anchor">#</a> ä¸€ã€Webpack ç®€ä»‹</h1> <h2 id="_1-1-webpack-æ˜¯ä»€ä¹ˆ"><a href="#_1-1-webpack-æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> 1.1 webpack æ˜¯ä»€ä¹ˆ</h2> <p>webpack æ˜¯ä¸€ç§<strong>å‰ç«¯èµ„æºæ„å»ºå·¥å…·</strong>ï¼Œä¸€ä¸ªé™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚</p> <p>åœ¨webpack çœ‹æ¥, å‰ç«¯çš„æ‰€æœ‰èµ„æºæ–‡ä»¶(js/json/css/img/less/...)éƒ½ä¼šä½œä¸ºæ¨¡å—å¤„ç†ã€‚
å®ƒå°†æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»è¿›è¡Œé™æ€åˆ†æï¼Œæ‰“åŒ…ç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æº(bundle)ã€‚</p> <h2 id="_1-2-webpack-äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ"><a href="#_1-2-webpack-äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ" class="header-anchor">#</a> 1.2 webpack äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h2> <h4 id="_1-2-1-entry"><a href="#_1-2-1-entry" class="header-anchor">#</a> 1.2.1 Entry</h4> <p>å…¥å£(Entry)ï¼šæŒ‡ç¤º webpack ä»¥å“ªä¸ªæ–‡ä»¶ä¸ºå…¥å£èµ·ç‚¹å¼€å§‹æ‰“åŒ…ï¼Œåˆ†ææ„å»ºå†…éƒ¨ä¾èµ–å›¾ã€‚</p> <h4 id="_1-2-2-output"><a href="#_1-2-2-output" class="header-anchor">#</a> 1.2.2 Output</h4> <p>è¾“å‡º(Output)ï¼šæŒ‡ç¤º webpack æ‰“åŒ…åçš„èµ„æº bundles è¾“å‡ºåˆ°å“ªé‡Œå»ï¼Œä»¥åŠå¦‚ä½•å‘½åã€‚</p> <h4 id="_1-2-3-loader"><a href="#_1-2-3-loader" class="header-anchor">#</a> 1.2.3 Loader</h4> <p>Loaderï¼šè®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JS çš„æ–‡ä»¶ï¼Œæ¯”å¦‚æ ·å¼æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶(webpack è‡ªèº«åªç†è§£
JS)</p> <h4 id="_1-2-4-plugins"><a href="#_1-2-4-plugins" class="header-anchor">#</a> 1.2.4 Plugins</h4> <p>æ’ä»¶(Plugins)ï¼šå¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œ
ä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ç­‰ã€‚</p> <h4 id="_1-2-5-mode"><a href="#_1-2-5-mode" class="header-anchor">#</a> 1.2.5 Mode</h4> <p>æ¨¡å¼(Mode)ï¼šæŒ‡ç¤º webpack ä½¿ç”¨ç›¸åº”æ¨¡å¼çš„é…ç½®ã€‚</p> <table><thead><tr><th>é€‰é¡¹</th> <th>æè¿°</th> <th>ç‰¹ç‚¹</th></tr></thead> <tbody><tr><td>development</td> <td>ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º developmentã€‚å¯ç”¨ NamedChunksPlugin å’Œ NamedModulesPluginã€‚</td> <td>èƒ½è®©ä»£ç æœ¬åœ°è°ƒè¯•è¿è¡Œçš„ç¯å¢ƒ</td></tr> <tr><td>production</td> <td>ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º productionã€‚å¯ç”¨ FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin å’Œ TerserPluginã€‚</td> <td>èƒ½è®©ä»£ç ä¼˜åŒ–ä¸Šçº¿è¿è¡Œçš„ç¯å¢ƒ</td></tr></tbody></table> <h1 id="äºŒã€webpack-åˆä½“éªŒ"><a href="#äºŒã€webpack-åˆä½“éªŒ" class="header-anchor">#</a> äºŒã€Webpack åˆä½“éªŒ</h1> <h2 id="_2-1-åˆå§‹åŒ–é…ç½®"><a href="#_2-1-åˆå§‹åŒ–é…ç½®" class="header-anchor">#</a> 2.1 åˆå§‹åŒ–é…ç½®</h2> <ol><li><p>åˆå§‹åŒ– package.jsonï¼šnpm init</p></li> <li><p>ä¸‹è½½å®‰è£…webpackï¼š(webpack4ä»¥ä¸Šçš„ç‰ˆæœ¬éœ€è¦å…¨å±€/æœ¬åœ°éƒ½å®‰è£…webpack-cli)</p> <p>å…¨å±€å®‰è£…ï¼šcnpm i webpack webpack-cli -g</p> <p>æœ¬åœ°å®‰è£…ï¼šcnpm i webpack webpack-cli -D</p></li></ol> <h2 id="_2-2-ç¼–è¯‘æ‰“åŒ…åº”ç”¨"><a href="#_2-2-ç¼–è¯‘æ‰“åŒ…åº”ç”¨" class="header-anchor">#</a> 2.2 ç¼–è¯‘æ‰“åŒ…åº”ç”¨</h2> <p>åˆ›å»º src ä¸‹çš„ js ç­‰æ–‡ä»¶åï¼Œä¸éœ€è¦é…ç½® webpack.config.js æ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œå°±å¯ä»¥ç¼–è¯‘æ‰“åŒ…ã€‚</p> <p>æŒ‡ä»¤ï¼š</p> <ul><li><p>å¼€å‘ç¯å¢ƒï¼šwebpack ./src/index.js -o ./build/built.js --mode=development</p> <p>webpackä¼šä»¥ ./src/index.js ä¸ºå…¥å£æ–‡ä»¶å¼€å§‹æ‰“åŒ…ï¼Œæ‰“åŒ…åè¾“å‡ºåˆ° ./build/built.js æ•´ä½“æ‰“åŒ…ç¯å¢ƒï¼Œæ˜¯å¼€å‘ç¯å¢ƒ</p></li> <li><p>ç”Ÿäº§ç¯å¢ƒï¼šwebpack ./src/index.js -o ./build/built.js --mode=production</p> <p>webpackä¼šä»¥ ./src/index.js ä¸ºå…¥å£æ–‡ä»¶å¼€å§‹æ‰“åŒ…ï¼Œæ‰“åŒ…åè¾“å‡ºåˆ° ./build/built.js æ•´ä½“æ‰“åŒ…ç¯å¢ƒï¼Œæ˜¯ç”Ÿäº§ç¯å¢ƒ</p></li></ul> <p>ç»“è®ºï¼š</p> <ol><li>webpack æœ¬èº«èƒ½å¤„ç† js/json èµ„æºï¼Œä¸èƒ½å¤„ç† css/img ç­‰å…¶ä»–èµ„æº</li> <li>ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒå°† ES6 æ¨¡å—åŒ–ç¼–è¯‘æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„æ¨¡å—åŒ–ï¼Œä½†æ˜¯ä¸èƒ½å¤„ç† ES6 çš„åŸºæœ¬è¯­æ³•è½¬åŒ–ä¸º ES5ï¼ˆéœ€è¦å€ŸåŠ© loaderï¼‰</li> <li>ç”Ÿäº§ç¯å¢ƒæ¯”å¼€å‘ç¯å¢ƒå¤šä¸€ä¸ªå‹ç¼© js ä»£ç </li></ol> <h1 id="ä¸‰ã€webpack-å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®"><a href="#ä¸‰ã€webpack-å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®" class="header-anchor">#</a> ä¸‰ã€Webpack å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®</h1> <p>webpack.config.js æ˜¯ webpack çš„é…ç½®æ–‡ä»¶ã€‚</p> <p>ä½œç”¨: æŒ‡ç¤º webpack å¹²å“ªäº›æ´»ï¼ˆå½“ä½ è¿è¡Œ webpack æŒ‡ä»¤æ—¶ï¼Œä¼šåŠ è½½é‡Œé¢çš„é…ç½®ï¼‰</p> <p>æ‰€æœ‰æ„å»ºå·¥å…·éƒ½æ˜¯åŸºäº nodejs å¹³å°è¿è¡Œçš„ï¼Œæ¨¡å—åŒ–é»˜è®¤é‡‡ç”¨ commonjsã€‚</p> <p>å¼€å‘ç¯å¢ƒé…ç½®ä¸»è¦æ˜¯ä¸ºäº†èƒ½è®©ä»£ç è¿è¡Œã€‚ä¸»è¦è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p> <ul><li>æ‰“åŒ…æ ·å¼èµ„æº</li> <li>æ‰“åŒ… html èµ„æº</li> <li>æ‰“åŒ…å›¾ç‰‡èµ„æº</li> <li>æ‰“åŒ…å…¶ä»–èµ„æº</li> <li>devServer</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å¼€å‘ç¯å¢ƒwebpack.confg.jsé…ç½®æ–‡ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// resolveç”¨æ¥æ‹¼æ¥ç»å¯¹è·¯å¾„çš„æ–¹æ³•
const { resolve } = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin') // å¼•ç”¨plugin

module.exports = {
  // webpacké…ç½®
  entry: './src/js/index.js', // å…¥å£èµ·ç‚¹
  output: {
    // è¾“å‡º
    // è¾“å‡ºæ–‡ä»¶å
    filename: 'js/build.js',
    // __dirnameæ˜¯nodejsçš„å˜é‡ï¼Œä»£è¡¨å½“å‰æ–‡ä»¶çš„ç›®å½•ç»å¯¹è·¯å¾„
    path: resolve(__dirname, 'build'), // è¾“å‡ºè·¯å¾„ï¼Œæ‰€æœ‰èµ„æºæ‰“åŒ…éƒ½ä¼šè¾“å‡ºåˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹
  },
  // loaderé…ç½®
  module: {
    rules: [
      // è¯¦ç»†çš„loaderé…ç½®
      // ä¸åŒæ–‡ä»¶å¿…é¡»é…ç½®ä¸åŒloaderå¤„ç†
      {
        // åŒ¹é…å“ªäº›æ–‡ä»¶
        test: /\.less$/,
        // ä½¿ç”¨å“ªäº›loaderè¿›è¡Œå¤„ç†
        use: [
          // useæ•°ç»„ä¸­loaderæ‰§è¡Œé¡ºåºï¼šä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Šï¼Œä¾æ¬¡æ‰§è¡Œ(å…ˆæ‰§è¡Œcss-loader)
          // style-loaderï¼šåˆ›å»ºstyleæ ‡ç­¾ï¼Œå°†jsä¸­çš„æ ·å¼èµ„æºæ’å…¥è¿›å»ï¼Œæ·»åŠ åˆ°headä¸­ç”Ÿæ•ˆ
          'style-loader',
          // css-loaderï¼šå°†cssæ–‡ä»¶å˜æˆcommonjsæ¨¡å—åŠ è½½åˆ°jsä¸­ï¼Œé‡Œé¢å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²
          'css-loader',
          // less-loaderï¼šå°†lessæ–‡ä»¶ç¼–è¯‘æˆcssæ–‡ä»¶ï¼Œéœ€è¦ä¸‹è½½less-loaderå’Œless
          'less-loader'
        ],
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader'],
      },
      {
        // url-loaderï¼šå¤„ç†å›¾ç‰‡èµ„æºï¼Œé—®é¢˜ï¼šé»˜è®¤å¤„ç†ä¸äº†htmlä¸­çš„imgå›¾ç‰‡
        test: /\.(jpg|png|gif)$/,
        // éœ€è¦ä¸‹è½½ url-loader file-loader
        loader: 'url-loader',
        options: {
          // å›¾ç‰‡å¤§å°å°äº8kbï¼Œå°±ä¼šè¢«base64å¤„ç†ï¼Œä¼˜ç‚¹ï¼šå‡å°‘è¯·æ±‚æ•°é‡ï¼ˆå‡è½»æœåŠ¡å™¨å‹åŠ›ï¼‰ï¼Œç¼ºç‚¹ï¼šå›¾ç‰‡ä½“ç§¯ä¼šæ›´å¤§ï¼ˆæ–‡ä»¶è¯·æ±‚é€Ÿåº¦æ›´æ…¢ï¼‰
          // base64åœ¨å®¢æˆ·ç«¯æœ¬åœ°è§£ç æ‰€ä»¥ä¼šå‡å°‘æœåŠ¡å™¨å‹åŠ›ï¼Œå¦‚æœå›¾ç‰‡è¿‡å¤§è¿˜é‡‡ç”¨base64ç¼–ç ä¼šå¯¼è‡´cpuè°ƒç”¨ç‡ä¸Šå‡ï¼Œç½‘é¡µåŠ è½½æ—¶å˜å¡
          limit: 8 * 1024,
          // ç»™å›¾ç‰‡é‡å‘½åï¼Œ[hash:10]ï¼šå–å›¾ç‰‡çš„hashçš„å‰10ä½ï¼Œ[ext]ï¼šå–æ–‡ä»¶åŸæ¥æ‰©å±•å
          name: '[hash:10].[ext]',
          // é—®é¢˜ï¼šå› ä¸ºurl-loaderé»˜è®¤ä½¿ç”¨es6æ¨¡å—åŒ–è§£æï¼Œè€Œhtml-loaderå¼•å…¥å›¾ç‰‡æ˜¯conmonjsï¼Œè§£ææ—¶ä¼šå‡ºé—®é¢˜ï¼š[object Module]
          // è§£å†³ï¼šå…³é—­url-loaderçš„es6æ¨¡å—åŒ–ï¼Œä½¿ç”¨commonjsè§£æ
          esModule: false,
          outputPath: 'imgs',
        },
      },
      {
        test: /\.html$/,
        // å¤„ç†htmlæ–‡ä»¶çš„imgå›¾ç‰‡ï¼ˆè´Ÿè´£å¼•å…¥imgï¼Œä»è€Œèƒ½è¢«url-loaderè¿›è¡Œå¤„ç†ï¼‰
        loader: 'html-loader',
      },
      // æ‰“åŒ…å…¶ä»–èµ„æº(é™¤äº†html/js/cssèµ„æºä»¥å¤–çš„èµ„æº)
      {
        // æ’é™¤html|js|css|less|jpg|png|gifæ–‡ä»¶
        exclude: /\.(html|js|css|less|jpg|png|gif)/,
        // file-loaderï¼šå¤„ç†å…¶ä»–æ–‡ä»¶
        loader: 'file-loader',
        options: {
          name: '[hash:10].[ext]',
          outputPath: 'media',
        },
      },
    ],
  },
  // pluginçš„é…ç½®
  plugins: [
    // html-webpack-pluginï¼šé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„htmlæ–‡ä»¶ï¼Œè‡ªåŠ¨å¼•å…¥æ‰“åŒ…è¾“å‡ºçš„æ‰€æœ‰èµ„æºï¼ˆJS/CSSï¼‰
    // éœ€è¦æœ‰ç»“æ„çš„HTMLæ–‡ä»¶å¯ä»¥åŠ ä¸€ä¸ªtemplate
    new HtmlWebpackPlugin({
      // å¤åˆ¶è¿™ä¸ª./src/index.htmlæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å¼•å…¥æ‰“åŒ…è¾“å‡ºçš„æ‰€æœ‰èµ„æºï¼ˆJS/CSSï¼‰
      template: './src/index.html',
    }),
  ],
  // æ¨¡å¼
  mode: 'development', // å¼€å‘æ¨¡å¼
  // å¼€å‘æœåŠ¡å™¨ devServerï¼šç”¨æ¥è‡ªåŠ¨åŒ–ï¼Œä¸ç”¨æ¯æ¬¡ä¿®æ”¹åéƒ½é‡æ–°è¾“å…¥webpackæ‰“åŒ…ä¸€éï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼‰
  // ç‰¹ç‚¹ï¼šåªä¼šåœ¨å†…å­˜ä¸­ç¼–è¯‘æ‰“åŒ…ï¼Œä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºï¼ˆä¸ä¼šåƒä¹‹å‰é‚£æ ·åœ¨å¤–é¢çœ‹åˆ°æ‰“åŒ…è¾“å‡ºçš„buildåŒ…ï¼Œè€Œæ˜¯åœ¨å†…å­˜ä¸­ï¼Œå…³é—­åä¼šè‡ªåŠ¨åˆ é™¤ï¼‰
  // å¯åŠ¨devServeræŒ‡ä»¤ä¸ºï¼šnpx webpack-dev-server
  devServer: {
    // é¡¹ç›®æ„å»ºåè·¯å¾„
    contentBase: resolve(__dirname, 'build'),
    // å¯åŠ¨gzipå‹ç¼©
    compress: true,
    // ç«¯å£å·
    port: 3000,
    // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    open: true,
  },
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br></div></div><p>å…¶ä¸­ï¼Œå¤§éƒ¨åˆ†é…ç½®éƒ½åœ¨æ³¨é‡Šä¸­ç»™å‡ºè§£é‡Šã€‚</p> <ul><li><p>è¿è¡Œé¡¹ç›®çš„ä¸¤ä¸ªæŒ‡ä»¤ï¼š
webpack ä¼šå°†æ‰“åŒ…ç»“æœè¾“å‡ºå‡ºå»ï¼ˆbuildæ–‡ä»¶å¤¹ï¼‰
npx webpack-dev-server åªä¼šåœ¨å†…å­˜ä¸­ç¼–è¯‘æ‰“åŒ…ï¼Œæ²¡æœ‰è¾“å‡º</p></li> <li><p>loader å’Œ plugin çš„ä¸åŒï¼šï¼ˆplugin ä¸€å®šè¦å…ˆå¼•å…¥æ‰èƒ½ä½¿ç”¨ï¼‰</p> <p>loaderï¼š1. ä¸‹è½½ 2. ä½¿ç”¨ï¼ˆé…ç½® loaderï¼‰</p> <p>pluginsï¼š1.ä¸‹è½½ 2. å¼•å…¥ 3. ä½¿ç”¨</p></li></ul> <h1 id="å››ã€webpack-ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬é…ç½®"><a href="#å››ã€webpack-ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬é…ç½®" class="header-anchor">#</a> å››ã€Webpack ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬é…ç½®</h1> <p>è€Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®éœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p> <ul><li>æå– css æˆå•ç‹¬æ–‡ä»¶</li> <li>css å…¼å®¹æ€§å¤„ç†</li> <li>å‹ç¼© css</li> <li>js è¯­æ³•æ£€æŸ¥</li> <li>js å…¼å®¹æ€§å¤„ç†</li> <li>js å‹ç¼©</li> <li>html å‹ç¼©</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç”Ÿäº§ç¯å¢ƒä¸‹çš„webpack.config.jsé…ç½®</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const { resolve } = require('path')
const MiniCssExtractorPlugin = require('mini-css-extract-plugin')
const OptimiziCssAssetsWebpackPlugin = require('optimizi-css-assets-webpack-plugin')
const HtmlWebpackPlugin = require('html-webpack-plugin')

// å®šä¹‰node.jsçš„ç¯å¢ƒå˜é‡ï¼Œå†³å®šä½¿ç”¨browserslistçš„å“ªä¸ªç¯å¢ƒ
process.env.NODE_ENV = 'production'

// å¤ç”¨loaderçš„å†™æ³•
const commonCssLoader = [
  // è¿™ä¸ªloaderå–ä»£style-loaderã€‚ä½œç”¨ï¼šæå–jsä¸­çš„cssæˆå•ç‹¬æ–‡ä»¶ç„¶åé€šè¿‡linkåŠ è½½
  MiniCssExtractPlugin.loader,
  // css-loaderï¼šå°†cssæ–‡ä»¶æ•´åˆåˆ°jsæ–‡ä»¶ä¸­
  // ç»è¿‡css-loaderå¤„ç†åï¼Œæ ·å¼æ–‡ä»¶æ˜¯åœ¨jsæ–‡ä»¶ä¸­çš„
  // é—®é¢˜ï¼š1.jsæ–‡ä»¶ä½“ç§¯ä¼šå¾ˆå¤§2.éœ€è¦å…ˆåŠ è½½jså†åŠ¨æ€åˆ›å»ºstyleæ ‡ç­¾ï¼Œæ ·å¼æ¸²æŸ“é€Ÿåº¦å°±æ…¢ï¼Œä¼šå‡ºç°é—ªå±ç°è±¡
  // è§£å†³ï¼šç”¨MiniCssExtractPlugin.loaderæ›¿ä»£style-loader
  'css-loader',
  /*
    postcss-loaderï¼šcsså…¼å®¹æ€§å¤„ç†ï¼špostcss --&gt; éœ€è¦å®‰è£…ï¼špostcss-loader postcss-preset-env
    postcsséœ€è¦é€šè¿‡package.jsonä¸­browserslisté‡Œé¢çš„é…ç½®åŠ è½½æŒ‡å®šçš„csså…¼å®¹æ€§æ ·å¼
    åœ¨package.jsonä¸­å®šä¹‰browserslistï¼š
    &quot;browserslist&quot;: {
      // å¼€å‘ç¯å¢ƒ --&gt; è®¾ç½®nodeç¯å¢ƒå˜é‡ï¼šprocess.env.NODE_ENV = development
      &quot;development&quot;: [ // åªéœ€è¦å¯ä»¥è¿è¡Œå³å¯
        &quot;last 1 chrome version&quot;,
        &quot;last 1 firefox version&quot;,
        &quot;last 1 safari version&quot;
      ],
      // ç”Ÿäº§ç¯å¢ƒã€‚é»˜è®¤æ˜¯ç”Ÿäº§ç¯å¢ƒ
      &quot;production&quot;: [ // éœ€è¦æ»¡è¶³ç»å¤§å¤šæ•°æµè§ˆå™¨çš„å…¼å®¹
        &quot;&gt;0.2%&quot;,
        &quot;not dead&quot;,
        &quot;not op_mini all&quot;
      ]
    },
  */
  {
    loader: 'postcss-loader',
    options: {
      ident: 'postcss', // åŸºæœ¬å†™æ³•
      plugins: () =&gt; [
        // postcssçš„æ’ä»¶
        require('postcss-preset-env')(),
      ],
    },
  },
]

module.exports = {
  entry: './src/js/index.js',
  output: {
    filename: 'js/built.js',
    path: resolve(__dirname, 'build'),
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [...commonCssLoader],
      },
      {
        test: /\.less$/,
        use: [...commonCssLoader, 'less-loader'],
      },
      /*
        æ­£å¸¸æ¥è®²ï¼Œä¸€ä¸ªæ–‡ä»¶åªèƒ½è¢«ä¸€ä¸ªloaderå¤„ç†
        å½“ä¸€ä¸ªæ–‡ä»¶è¦è¢«å¤šä¸ªloaderå¤„ç†ï¼Œé‚£ä¹ˆä¸€å®šè¦æŒ‡å®šloaderæ‰§è¡Œçš„å…ˆåé¡ºåº
        å…ˆæ‰§è¡Œeslintå†æ‰§è¡Œbabelï¼ˆç”¨enforceï¼‰
      */
      {
        /*
          jsçš„è¯­æ³•æ£€æŸ¥ï¼š éœ€è¦ä¸‹è½½ eslint-loader eslint
          æ³¨æ„ï¼šåªæ£€æŸ¥è‡ªå·±å†™çš„æºä»£ç ï¼Œç¬¬ä¸‰æ–¹çš„åº“æ˜¯ä¸ç”¨æ£€æŸ¥çš„
          airbnb(ä¸€ä¸ªæµè¡Œçš„jsé£æ ¼) --&gt; éœ€è¦ä¸‹è½½ eslint-config-airbnb-base eslint-plugin-import
          è®¾ç½®æ£€æŸ¥è§„åˆ™ï¼š
            package.jsonä¸­eslintConfigä¸­è®¾ç½®
              &quot;eslintConfig&quot;: {
                &quot;extends&quot;: &quot;airbnb-base&quot;ï¼Œ // ç»§æ‰¿airbnbçš„é£æ ¼è§„èŒƒ
                &quot;env&quot;: {
                  &quot;browser&quot;: true // å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ä¸­çš„å…¨å±€å˜é‡(ä½¿ç”¨windowä¸ä¼šæŠ¥é”™)
                }
              }
        */
        test: /\.js$/,
        exclude: /node_modules/, // å¿½ç•¥node_modules
        enforce: 'pre', // ä¼˜å…ˆæ‰§è¡Œ
        loader: 'eslint-loader',
        options: {
          // è‡ªåŠ¨ä¿®å¤
          fix: true,
        },
      },
      /*
        jså…¼å®¹æ€§å¤„ç†ï¼šéœ€è¦ä¸‹è½½ babel-loader @babel/core
          1. åŸºæœ¬jså…¼å®¹æ€§å¤„ç† --&gt; @babel/preset-env
            é—®é¢˜ï¼šåªèƒ½è½¬æ¢åŸºæœ¬è¯­æ³•ï¼Œå¦‚promiseé«˜çº§è¯­æ³•ä¸èƒ½è½¬æ¢
          2. å…¨éƒ¨jså…¼å®¹æ€§å¤„ç† --&gt; @babel/polyfill
            é—®é¢˜ï¼šåªè¦è§£å†³éƒ¨åˆ†å…¼å®¹æ€§é—®é¢˜ï¼Œä½†æ˜¯å°†æ‰€æœ‰å…¼å®¹æ€§ä»£ç å…¨éƒ¨å¼•å…¥ï¼Œä½“ç§¯å¤ªå¤§äº†
          3. éœ€è¦åšå…¼å®¹æ€§å¤„ç†çš„å°±åšï¼šæŒ‰éœ€åŠ è½½  --&gt; core-js
      */
      {
        // ç¬¬ä¸‰ç§æ–¹å¼ï¼šæŒ‰éœ€åŠ è½½
        test: /\.js$/,
        exclude: /node_modules/,
        loader: 'babel-loader',
        options: {
          // é¢„è®¾ï¼šæŒ‡ç¤ºbabelåšæ€æ ·çš„å…¼å®¹æ€§å¤„ç†
          presets: [
            '@babel/preset-env', // åŸºæœ¬é¢„è®¾
            {
              useBuiltIns: 'usage', //æŒ‰éœ€åŠ è½½
              corejs: { version: 3 }, // æŒ‡å®šcore-jsç‰ˆæœ¬
              targets: { // æŒ‡å®šå…¼å®¹åˆ°ä»€ä¹ˆç‰ˆæœ¬çš„æµè§ˆå™¨
                chrome: '60',
                firefox: '50',
                ie: '9',
                safari: '10',
                edge: '17'
              },
            },
          ],
        },
      },
      {
        // å›¾ç‰‡å¤„ç†
        test: /\.(jpg|png|gif)/,
        loader: 'url-loader',
        options: {
          limit: 8 * 1024,
          name: '[hash:10].[ext]',
          outputPath: 'imgs',
          esModule: false, // å…³é—­url-loaderé»˜è®¤ä½¿ç”¨çš„es6æ¨¡å—åŒ–è§£æ
        },
      },
      // htmlä¸­çš„å›¾ç‰‡å¤„ç†
      {
        test: /\.html$/,
        loader: 'html-loader',
      },
      // å¤„ç†å…¶ä»–æ–‡ä»¶
      {
        exclude: /\.(js|css|less|html|jpg|png|gif)/,
        loader: 'file-loader',
        options: {
          outputPath: 'media',
        },
      },
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
      // å¯¹è¾“å‡ºçš„cssæ–‡ä»¶è¿›è¡Œé‡å‘½å
      filename: 'css/built.css',
    }),
    // å‹ç¼©css
    new OptimiziCssAssetsWebpackPlugin(),
    // HtmlWebpackPluginï¼šhtmlæ–‡ä»¶çš„æ‰“åŒ…å’Œå‹ç¼©å¤„ç†
    // é€šè¿‡è¿™ä¸ªæ’ä»¶ä¼šè‡ªåŠ¨å°†å•ç‹¬æ‰“åŒ…çš„æ ·å¼æ–‡ä»¶é€šè¿‡linkæ ‡ç­¾å¼•å…¥
    new HtmlWebpackPlugin({
      template: './src/index.html',
      // å‹ç¼©htmlä»£ç 
      minify: {
        // ç§»é™¤ç©ºæ ¼
        collapseWhitespace: true,
        // ç§»é™¤æ³¨é‡Š
        removeComments: true,
      },
    }),
  ],
  // ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šè‡ªåŠ¨å‹ç¼©jsä»£ç 
  mode: 'production',
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br></div></div><h1 id="äº”ã€webpack-ä¼˜åŒ–é…ç½®"><a href="#äº”ã€webpack-ä¼˜åŒ–é…ç½®" class="header-anchor">#</a> äº”ã€Webpack ä¼˜åŒ–é…ç½®</h1> <h2 id="_5-1-å¼€å‘ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–"><a href="#_5-1-å¼€å‘ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–" class="header-anchor">#</a> 5.1 å¼€å‘ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–</h2> <h3 id="_5-1-1-hmrï¼ˆæ¨¡å—çƒ­æ›¿æ¢ï¼‰"><a href="#_5-1-1-hmrï¼ˆæ¨¡å—çƒ­æ›¿æ¢ï¼‰" class="header-anchor">#</a> 5.1.1 HMRï¼ˆæ¨¡å—çƒ­æ›¿æ¢ï¼‰</h3> <p>HMR: hot module replacement çƒ­æ¨¡å—æ›¿æ¢ / æ¨¡å—çƒ­æ›¿æ¢</p> <p>ä½œç”¨ï¼šä¸€ä¸ªæ¨¡å—å‘ç”Ÿå˜åŒ–ï¼Œåªä¼šé‡æ–°æ‰“åŒ…æ„å»ºè¿™ä¸€ä¸ªæ¨¡å—ï¼ˆè€Œä¸æ˜¯æ‰“åŒ…æ‰€æœ‰æ¨¡å—ï¼‰ ï¼Œæå¤§æå‡æ„å»ºé€Ÿåº¦</p> <p>ä»£ç ï¼šåªéœ€è¦åœ¨ devServer ä¸­è®¾ç½® hot ä¸º trueï¼Œå°±ä¼šè‡ªåŠ¨å¼€å¯HMRåŠŸèƒ½ï¼ˆåªèƒ½åœ¨å¼€å‘æ¨¡å¼ä¸‹ä½¿ç”¨ï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>devServer: {
  contentBase: resolve(__dirname, 'build'),
  compress: true,
  port: 3000,
  open: true,
  // å¼€å¯HMRåŠŸèƒ½
  // å½“ä¿®æ”¹äº†webpacké…ç½®ï¼Œæ–°é…ç½®è¦æƒ³ç”Ÿæ•ˆï¼Œå¿…é¡»é‡å¯webpackæœåŠ¡
  hot: true
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ¯ç§æ–‡ä»¶å®ç°çƒ­æ¨¡å—æ›¿æ¢çš„æƒ…å†µï¼š</p> <ul><li><p>æ ·å¼æ–‡ä»¶ï¼šå¯ä»¥ä½¿ç”¨HMRåŠŸèƒ½ï¼Œå› ä¸ºå¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨çš„ style-loader å†…éƒ¨é»˜è®¤å®ç°äº†çƒ­æ¨¡å—æ›¿æ¢åŠŸèƒ½</p></li> <li><p>js æ–‡ä»¶ï¼šé»˜è®¤ä¸èƒ½ä½¿ç”¨HMRåŠŸèƒ½ï¼ˆä¿®æ”¹ä¸€ä¸ª js æ¨¡å—æ‰€æœ‰ js æ¨¡å—éƒ½ä¼šåˆ·æ–°ï¼‰</p> <p>--&gt; å®ç° HMR éœ€è¦ä¿®æ”¹ js ä»£ç ï¼ˆæ·»åŠ æ”¯æŒ HMR åŠŸèƒ½çš„ä»£ç ï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// ç»‘å®š
if (module.hot) {
  // ä¸€æ—¦ module.hot ä¸ºtrueï¼Œè¯´æ˜å¼€å¯äº†HMRåŠŸèƒ½ã€‚ --&gt; è®©HMRåŠŸèƒ½ä»£ç ç”Ÿæ•ˆ
  module.hot.accept('./print.js', function() {
    // æ–¹æ³•ä¼šç›‘å¬ print.js æ–‡ä»¶çš„å˜åŒ–ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œåªæœ‰è¿™ä¸ªæ¨¡å—ä¼šé‡æ–°æ‰“åŒ…æ„å»ºï¼Œå…¶ä»–æ¨¡å—ä¸ä¼šã€‚
    // ä¼šæ‰§è¡Œåé¢çš„å›è°ƒå‡½æ•°
    print();
  });
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ³¨æ„ï¼šHMR åŠŸèƒ½å¯¹ js çš„å¤„ç†ï¼Œåªèƒ½å¤„ç†éå…¥å£ js æ–‡ä»¶çš„å…¶ä»–æ–‡ä»¶ã€‚</p></li> <li><p>html æ–‡ä»¶: é»˜è®¤ä¸èƒ½ä½¿ç”¨ HMR åŠŸèƒ½ï¼ˆhtml ä¸ç”¨åš HMR åŠŸèƒ½ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ª html æ–‡ä»¶ï¼Œä¸éœ€è¦å†ä¼˜åŒ–ï¼‰</p> <p>ä½¿ç”¨ HMR ä¼šå¯¼è‡´é—®é¢˜ï¼šhtml æ–‡ä»¶ä¸èƒ½çƒ­æ›´æ–°äº†ï¼ˆä¸ä¼šè‡ªåŠ¨æ‰“åŒ…æ„å»ºï¼‰</p> <p>è§£å†³ï¼šä¿®æ”¹ entry å…¥å£ï¼Œå°† html æ–‡ä»¶å¼•å…¥ï¼ˆè¿™æ · html ä¿®æ”¹æ•´ä½“åˆ·æ–°ï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>entry: ['./src/js/index.js', './src/index.html']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="_5-1-2-source-map"><a href="#_5-1-2-source-map" class="header-anchor">#</a> 5.1.2 source-map</h3> <p>source-mapï¼šä¸€ç§æä¾›<strong>æºä»£ç åˆ°æ„å»ºåä»£ç çš„æ˜ å°„</strong>çš„æŠ€æœ¯ ï¼ˆå¦‚æœæ„å»ºåä»£ç å‡ºé”™äº†ï¼Œé€šè¿‡æ˜ å°„å¯ä»¥è¿½è¸ªæºä»£ç é”™è¯¯ï¼‰</p> <p>å‚æ•°ï¼š<code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code></p> <p>ä»£ç ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>devtool: 'eval-source-map'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¯é€‰æ–¹æ¡ˆï¼š[ç”Ÿæˆsource-mapçš„ä½ç½®|ç»™å‡ºçš„é”™è¯¯ä»£ç ä¿¡æ¯]</p> <ul><li>source-mapï¼šå¤–éƒ¨ï¼Œé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</li> <li>inline-source-mapï¼šå†…è”ï¼Œåªç”Ÿæˆä¸€ä¸ªå†…è” source-mapï¼Œé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</li> <li>hidden-source-mapï¼šå¤–éƒ¨ï¼Œé”™è¯¯ä»£ç é”™è¯¯åŸå› ï¼Œä½†æ˜¯æ²¡æœ‰é”™è¯¯ä½ç½®ï¼ˆä¸ºäº†éšè—æºä»£ç ï¼‰ï¼Œä¸èƒ½è¿½è¸ªæºä»£ç é”™è¯¯ï¼Œåªèƒ½æç¤ºåˆ°æ„å»ºåä»£ç çš„é”™è¯¯ä½ç½®</li> <li>eval-source-mapï¼šå†…è”ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½ç”Ÿæˆå¯¹åº”çš„ source-mapï¼Œéƒ½åœ¨ eval ä¸­ï¼Œé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½</li> <li>nosources-source-mapï¼šå¤–éƒ¨ï¼Œé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•æºä»£ç ä¿¡æ¯ï¼ˆä¸ºäº†éšè—æºä»£ç ï¼‰</li> <li>cheap-source-mapï¼šå¤–éƒ¨ï¼Œé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®ï¼Œåªèƒ½æŠŠé”™è¯¯ç²¾ç¡®åˆ°æ•´è¡Œï¼Œå¿½ç•¥åˆ—</li> <li>cheap-module-source-mapï¼šå¤–éƒ¨ï¼Œé”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®ï¼Œmodule ä¼šåŠ å…¥ loader çš„ source-map</li></ul> <p>å†…è” å’Œ å¤–éƒ¨çš„åŒºåˆ«ï¼š1. å¤–éƒ¨ç”Ÿæˆäº†æ–‡ä»¶ï¼Œå†…è”æ²¡æœ‰ 2. å†…è”æ„å»ºé€Ÿåº¦æ›´å¿«</p> <p>å¼€å‘/ç”Ÿäº§ç¯å¢ƒå¯åšçš„é€‰æ‹©ï¼š</p> <p><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šéœ€è¦è€ƒè™‘é€Ÿåº¦å¿«ï¼Œè°ƒè¯•æ›´å‹å¥½</p> <ul><li>é€Ÿåº¦å¿«( eval &gt; inline &gt; cheap &gt;... )
<ol><li>eval-cheap-souce-map</li> <li>eval-source-map</li></ol></li> <li>è°ƒè¯•æ›´å‹å¥½
<ol><li>souce-map</li> <li>cheap-module-souce-map</li> <li>cheap-souce-map</li></ol></li></ul> <p><strong>æœ€ç»ˆå¾—å‡ºæœ€å¥½çš„ä¸¤ç§æ–¹æ¡ˆ --&gt; eval-source-mapï¼ˆå®Œæ•´åº¦é«˜ï¼Œå†…è”é€Ÿåº¦å¿«ï¼‰ / eval-cheap-module-souce-mapï¼ˆé”™è¯¯æç¤ºå¿½ç•¥åˆ—ä½†æ˜¯åŒ…å«å…¶ä»–ä¿¡æ¯ï¼Œå†…è”é€Ÿåº¦å¿«ï¼‰</strong></p> <p><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šéœ€è¦è€ƒè™‘æºä»£ç è¦ä¸è¦éšè—ï¼Œè°ƒè¯•è¦ä¸è¦æ›´å‹å¥½</p> <ul><li>å†…è”ä¼šè®©ä»£ç ä½“ç§¯å˜å¤§ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸ç”¨å†…è”</li> <li>éšè—æºä»£ç 
<ol><li>nosources-source-map å…¨éƒ¨éšè—</li> <li>hidden-source-map åªéšè—æºä»£ç ï¼Œä¼šæç¤ºæ„å»ºåä»£ç é”™è¯¯ä¿¡æ¯</li></ol></li></ul> <p><strong>æœ€ç»ˆå¾—å‡ºæœ€å¥½çš„ä¸¤ç§æ–¹æ¡ˆ --&gt; source-mapï¼ˆæœ€å®Œæ•´ï¼‰ / cheap-module-souce-mapï¼ˆé”™è¯¯æç¤ºä¸€æ•´è¡Œå¿½ç•¥åˆ—ï¼‰</strong></p> <h2 id="_5-2-ç”Ÿäº§ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–"><a href="#_5-2-ç”Ÿäº§ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–" class="header-anchor">#</a> 5.2 ç”Ÿäº§ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–</h2> <h3 id="_5-2-1-ä¼˜åŒ–æ‰“åŒ…æ„å»ºé€Ÿåº¦"><a href="#_5-2-1-ä¼˜åŒ–æ‰“åŒ…æ„å»ºé€Ÿåº¦" class="header-anchor">#</a> 5.2.1 ä¼˜åŒ–æ‰“åŒ…æ„å»ºé€Ÿåº¦</h3> <h4 id="_5-2-1-1-oneof"><a href="#_5-2-1-1-oneof" class="header-anchor">#</a> 5.2.1.1 oneOf</h4> <p>oneOfï¼šåŒ¹é…åˆ° loader åå°±ä¸å†å‘åè¿›è¡ŒåŒ¹é…ï¼Œä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒçš„æ‰“åŒ…æ„å»ºé€Ÿåº¦</p> <p>ä»£ç ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module: {
  rules: [
    {
      // js è¯­æ³•æ£€æŸ¥
      test: /\.js$/,
      exclude: /node_modules/,
      // ä¼˜å…ˆæ‰§è¡Œ
      enforce: 'pre',
      loader: 'eslint-loader',
      options: {
        fix: true
      }
    },
    {
      // oneOf ä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒçš„æ‰“åŒ…æ„å»ºé€Ÿåº¦
      // ä»¥ä¸‹loaderåªä¼šåŒ¹é…ä¸€ä¸ªï¼ˆåŒ¹é…åˆ°äº†åå°±ä¸ä¼šå†å¾€ä¸‹åŒ¹é…äº†ï¼‰
      // æ³¨æ„ï¼šä¸èƒ½æœ‰ä¸¤ä¸ªé…ç½®å¤„ç†åŒä¸€ç§ç±»å‹æ–‡ä»¶ï¼ˆæ‰€ä»¥æŠŠeslint-loaderæå–å‡ºå»æ”¾å¤–é¢ï¼‰
      oneOf: [
        {
          test: /\.css$/,
          use: [...commonCssLoader]
        },
        {
          test: /\.less$/,
          use: [...commonCssLoader, 'less-loader']
        },
        {
          // js å…¼å®¹æ€§å¤„ç†
          test: /\.js$/,
          exclude: /node_modules/,
          loader: 'babel-loader',
          options: {
            presets: [
              [
                '@babel/preset-env',
                {
                  useBuiltIns: 'usage',
                  corejs: {version: 3},
                  targets: {
                    chrome: '60',
                    firefox: '50'
                  }
                }
              ]
            ]
          }
        },
        {
          test: /\.(jpg|png|gif)/,
          loader: 'url-loader',
          options: {
            limit: 8 * 1024,
            name: '[hash:10].[ext]',
            outputPath: 'imgs',
            esModule: false
          }
        },
        {
          test: /\.html$/,
          loader: 'html-loader'
        },
        {
          exclude: /\.(js|css|less|html|jpg|png|gif)/,
          loader: 'file-loader',
          options: {
            outputPath: 'media'
          }
        }
      ]
    }
  ]
},
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h4 id="_5-2-1-2-babel-ç¼“å­˜"><a href="#_5-2-1-2-babel-ç¼“å­˜" class="header-anchor">#</a> 5.2.1.2 babel ç¼“å­˜</h4> <p><strong>babel ç¼“å­˜</strong>ï¼šç±»ä¼¼ HMRï¼Œå°† babel å¤„ç†åçš„èµ„æºç¼“å­˜èµ·æ¥ï¼ˆå“ªé‡Œçš„ js æ”¹å˜å°±æ›´æ–°å“ªé‡Œï¼Œå…¶ä»– js è¿˜æ˜¯ç”¨ä¹‹å‰ç¼“å­˜çš„èµ„æºï¼‰ï¼Œè®©ç¬¬äºŒæ¬¡æ‰“åŒ…æ„å»ºé€Ÿåº¦æ›´å¿«</p> <p>ä»£ç ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  test: /\.js$/,
  exclude: /node_modules/,
  loader: 'babel-loader',
  options: {
    presets: [
      [
        '@babel/preset-env',
        {
          useBuiltIns: 'usage',
          corejs: { version: 3 },
          targets: {
            chrome: '60',
            firefox: '50'
          }
        }
      ]
    ],
    // å¼€å¯babelç¼“å­˜
    // ç¬¬äºŒæ¬¡æ„å»ºæ—¶ï¼Œä¼šè¯»å–ä¹‹å‰çš„ç¼“å­˜
    cacheDirectory: true
  }
},
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>æ–‡ä»¶èµ„æºç¼“å­˜</strong></p> <p>æ–‡ä»¶åä¸å˜ï¼Œå°±ä¸ä¼šé‡æ–°è¯·æ±‚ï¼Œè€Œæ˜¯å†æ¬¡ç”¨ä¹‹å‰ç¼“å­˜çš„èµ„æº</p> <p>1.hash: æ¯æ¬¡ wepack æ‰“åŒ…æ—¶ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ hash å€¼ã€‚</p> <p>é—®é¢˜ï¼šé‡æ–°æ‰“åŒ…ï¼Œæ‰€æœ‰æ–‡ä»¶çš„ hsah å€¼éƒ½æ”¹å˜ï¼Œä¼šå¯¼è‡´æ‰€æœ‰ç¼“å­˜å¤±æ•ˆã€‚ï¼ˆå¯èƒ½åªæ”¹åŠ¨äº†ä¸€ä¸ªæ–‡ä»¶ï¼‰</p> <p>2.chunkhashï¼šæ ¹æ® chunk ç”Ÿæˆçš„ hash å€¼ã€‚æ¥æºäºåŒä¸€ä¸ª chunkçš„ hash å€¼ä¸€æ ·</p> <p>é—®é¢˜ï¼šjs å’Œ css æ¥è‡ªåŒä¸€ä¸ªchunkï¼Œhash å€¼æ˜¯ä¸€æ ·çš„ï¼ˆå› ä¸º css-loader ä¼šå°† css æ–‡ä»¶åŠ è½½åˆ° js ä¸­ï¼Œæ‰€ä»¥åŒå±äºä¸€ä¸ªchunkï¼‰</p> <p>3.contenthash: æ ¹æ®æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆ hash å€¼ã€‚ä¸åŒæ–‡ä»¶ hash å€¼ä¸€å®šä¸ä¸€æ ·(æ–‡ä»¶å†…å®¹ä¿®æ”¹ï¼Œæ–‡ä»¶åé‡Œçš„ hash æ‰ä¼šæ”¹å˜)</p> <p>ä¿®æ”¹ css æ–‡ä»¶å†…å®¹ï¼Œæ‰“åŒ…åçš„ css æ–‡ä»¶å hash å€¼å°±æ”¹å˜ï¼Œè€Œ js æ–‡ä»¶æ²¡æœ‰æ”¹å˜ hash å€¼å°±ä¸å˜ï¼Œè¿™æ · css å’Œ js ç¼“å­˜å°±ä¼šåˆ†å¼€åˆ¤æ–­è¦ä¸è¦é‡æ–°è¯·æ±‚èµ„æº --&gt; è®©ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜æ›´å¥½ä½¿ç”¨</p> <h4 id="_5-2-1-3-å¤šè¿›ç¨‹æ‰“åŒ…"><a href="#_5-2-1-3-å¤šè¿›ç¨‹æ‰“åŒ…" class="header-anchor">#</a> 5.2.1.3 å¤šè¿›ç¨‹æ‰“åŒ…</h4> <p>å¤šè¿›ç¨‹æ‰“åŒ…ï¼šæŸä¸ªä»»åŠ¡æ¶ˆè€—æ—¶é—´è¾ƒé•¿ä¼šå¡é¡¿ï¼Œå¤šè¿›ç¨‹å¯ä»¥åŒä¸€æ—¶é—´å¹²å¤šä»¶äº‹ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p> <p>ä¼˜ç‚¹æ˜¯æå‡æ‰“åŒ…é€Ÿåº¦ï¼Œç¼ºç‚¹æ˜¯æ¯ä¸ªè¿›ç¨‹çš„å¼€å¯å’Œäº¤æµéƒ½ä¼šæœ‰å¼€é”€ï¼ˆbabel-loaderæ¶ˆè€—æ—¶é—´æœ€ä¹…ï¼Œæ‰€ä»¥ä½¿ç”¨thread-loaderé’ˆå¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼‰</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  test: /\.js$/,
  exclude: /node_modules/,
  use: [
    /* 
      thread-loaderä¼šå¯¹å…¶åé¢çš„loaderï¼ˆè¿™é‡Œæ˜¯babel-loaderï¼‰å¼€å¯å¤šè¿›ç¨‹æ‰“åŒ…ã€‚ 
      è¿›ç¨‹å¯åŠ¨å¤§æ¦‚ä¸º600msï¼Œè¿›ç¨‹é€šä¿¡ä¹Ÿæœ‰å¼€é”€ã€‚(å¯åŠ¨çš„å¼€é”€æ¯”è¾ƒæ˜‚è´µï¼Œä¸è¦æ»¥ç”¨)
      åªæœ‰å·¥ä½œæ¶ˆè€—æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ‰éœ€è¦å¤šè¿›ç¨‹æ‰“åŒ…
    */
    {
      loader: 'thread-loader',
      options: {
        workers: 2 // è¿›ç¨‹2ä¸ª
      }
    },
    {
      loader: 'babel-loader',
      options: {
        presets: [
          [
            '@babel/preset-env',
            {
              useBuiltIns: 'usage',
              corejs: { version: 3 },
              targets: {
                chrome: '60',
                firefox: '50'
              }
            }
          ]
        ],
        // å¼€å¯babelç¼“å­˜
        // ç¬¬äºŒæ¬¡æ„å»ºæ—¶ï¼Œä¼šè¯»å–ä¹‹å‰çš„ç¼“å­˜
        cacheDirectory: true
      }
    }
  ]
},
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h4 id="_5-2-1-4-externals"><a href="#_5-2-1-4-externals" class="header-anchor">#</a> 5.2.1.4 externals</h4> <p>externalsï¼šè®©æŸäº›åº“ä¸æ‰“åŒ…ï¼Œé€šè¿‡ cdn å¼•å…¥</p> <p>webpack.config.js ä¸­é…ç½®ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>externals: {
  // æ‹’ç»jQueryè¢«æ‰“åŒ…è¿›æ¥(é€šè¿‡cdnå¼•å…¥ï¼Œé€Ÿåº¦ä¼šå¿«ä¸€äº›)
  // å¿½ç•¥çš„åº“å -- npmåŒ…å
  jquery: 'jQuery'
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>éœ€è¦åœ¨ index.html ä¸­é€šè¿‡ cdn å¼•å…¥ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;script src=&quot;https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_5-2-1-5-dll"><a href="#_5-2-1-5-dll" class="header-anchor">#</a> 5.2.1.5 dll</h4> <p>dllï¼šè®©æŸäº›åº“å•ç‹¬æ‰“åŒ…ï¼Œåç›´æ¥å¼•å…¥åˆ° build ä¸­ã€‚å¯ä»¥åœ¨ code split åˆ†å‰²å‡º node_modules åå†ç”¨ dll æ›´ç»†çš„åˆ†å‰²ï¼Œä¼˜åŒ–ä»£ç è¿è¡Œçš„æ€§èƒ½ã€‚</p> <p>webpack.dll.js é…ç½®ï¼š(å°† jquery å•ç‹¬æ‰“åŒ…)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/*
  node_modulesçš„åº“ä¼šæ‰“åŒ…åˆ°ä¸€èµ·ï¼Œä½†æ˜¯å¾ˆå¤šåº“çš„æ—¶å€™æ‰“åŒ…è¾“å‡ºçš„jsæ–‡ä»¶å°±å¤ªå¤§äº†
  ä½¿ç”¨dllæŠ€æœ¯ï¼Œå¯¹æŸäº›åº“ï¼ˆç¬¬ä¸‰æ–¹åº“ï¼šjqueryã€reactã€vue...ï¼‰è¿›è¡Œå•ç‹¬æ‰“åŒ…
  å½“è¿è¡Œwebpackæ—¶ï¼Œé»˜è®¤æŸ¥æ‰¾webpack.config.jsé…ç½®æ–‡ä»¶
  éœ€æ±‚ï¼šéœ€è¦è¿è¡Œwebpack.dll.jsæ–‡ä»¶
    --&gt; webpack --config webpack.dll.jsï¼ˆè¿è¡Œè¿™ä¸ªæŒ‡ä»¤è¡¨ç¤ºä»¥è¿™ä¸ªé…ç½®æ–‡ä»¶æ‰“åŒ…ï¼‰
*/
const { resolve } = require('path');
const webpack = require('webpack');

module.exports = {
  entry: {
    // æœ€ç»ˆæ‰“åŒ…ç”Ÿæˆçš„[name] --&gt; jquery
    // ['jquery] --&gt; è¦æ‰“åŒ…çš„åº“æ˜¯jquery
    jquery: ['jquery']
  },
  output: {
    // è¾“å‡ºå‡ºå£æŒ‡å®š
    filename: '[name].js', // nameå°±æ˜¯jquery
    path: resolve(__dirname, 'dll'), // æ‰“åŒ…åˆ°dllç›®å½•ä¸‹
    library: '[name]_[hash]', // æ‰“åŒ…çš„åº“é‡Œé¢å‘å¤–æš´éœ²å‡ºå»çš„å†…å®¹å«ä»€ä¹ˆåå­—
  },
  plugins: [
    // æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªmanifest.json --&gt; æä¾›jqueryçš„æ˜ å°„å…³ç³»ï¼ˆå‘Šè¯‰webpackï¼šjqueryä¹‹åä¸éœ€è¦å†æ‰“åŒ…å’Œæš´éœ²å†…å®¹çš„åç§°ï¼‰
    new webpack.DllPlugin({
      name: '[name]_[hash]', // æ˜ å°„åº“çš„æš´éœ²çš„å†…å®¹åç§°
      path: resolve(__dirname, 'dll/manifest.json') // è¾“å‡ºæ–‡ä»¶è·¯å¾„
    })
  ],
  mode: 'production'
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>webpack.config.js é…ç½®ï¼š(å‘Šè¯‰ webpack ä¸éœ€è¦å†æ‰“åŒ… jqueryï¼Œå¹¶å°†ä¹‹å‰æ‰“åŒ…å¥½çš„ jquery è·Ÿå…¶ä»–æ‰“åŒ…å¥½çš„èµ„æºä¸€åŒè¾“å‡ºåˆ° build ç›®å½•ä¸‹)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// å¼•å…¥æ’ä»¶
const webpack = require('webpack');
const AddAssetHtmlWebpackPlugin = require('add-asset-html-webpack-plugin');

// pluginsä¸­é…ç½®ï¼š
plugins: [
  new HtmlWebpackPlugin({
    template: './src/index.html'
  }),
  // å‘Šè¯‰webpackå“ªäº›åº“ä¸å‚ä¸æ‰“åŒ…ï¼ŒåŒæ—¶ä½¿ç”¨æ—¶çš„åç§°ä¹Ÿå¾—å˜
  new webpack.DllReferencePlugin({
    manifest: resolve(__dirname, 'dll/manifest.json')
  }),
  // å°†æŸä¸ªæ–‡ä»¶æ‰“åŒ…è¾“å‡ºåˆ°buildç›®å½•ä¸‹ï¼Œå¹¶åœ¨htmlä¸­è‡ªåŠ¨å¼•å…¥è¯¥èµ„æº
  new AddAssetHtmlWebpackPlugin({
    filepath: resolve(__dirname, 'dll/jquery.js')
  })
],
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_5-2-2-ä¼˜åŒ–ä»£ç è¿è¡Œçš„æ€§èƒ½"><a href="#_5-2-2-ä¼˜åŒ–ä»£ç è¿è¡Œçš„æ€§èƒ½" class="header-anchor">#</a> 5.2.2 ä¼˜åŒ–ä»£ç è¿è¡Œçš„æ€§èƒ½</h3> <h4 id="_5-2-2-1-ç¼“å­˜"><a href="#_5-2-2-1-ç¼“å­˜" class="header-anchor">#</a> 5.2.2.1 ç¼“å­˜</h4> <h4 id="_5-2-2-2-tree-shakingï¼ˆæ ‘æ‘‡ï¼‰"><a href="#_5-2-2-2-tree-shakingï¼ˆæ ‘æ‘‡ï¼‰" class="header-anchor">#</a> 5.2.2.2 tree shakingï¼ˆæ ‘æ‘‡ï¼‰</h4> <p>tree shakingï¼šå»é™¤æ— ç”¨ä»£ç </p> <p>å‰æï¼š1. å¿…é¡»ä½¿ç”¨ ES6 æ¨¡å—åŒ– 2. å¼€å¯ production ç¯å¢ƒ ï¼ˆè¿™æ ·å°±è‡ªåŠ¨ä¼šæŠŠæ— ç”¨ä»£ç å»æ‰ï¼‰</p> <p>ä½œç”¨ï¼šå‡å°‘ä»£ç ä½“ç§¯</p> <p>åœ¨ package.json ä¸­é…ç½®ï¼š</p> <p><code>&quot;sideEffects&quot;: false</code> è¡¨ç¤ºæ‰€æœ‰ä»£ç éƒ½æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆéƒ½å¯ä»¥è¿›è¡Œ tree shakingï¼‰</p> <p>è¿™æ ·ä¼šå¯¼è‡´çš„é—®é¢˜ï¼šå¯èƒ½ä¼šæŠŠ css / @babel/polyfill æ–‡ä»¶å¹²æ‰ï¼ˆå‰¯ä½œç”¨ï¼‰</p> <p>æ‰€ä»¥å¯ä»¥é…ç½®ï¼š<code>&quot;sideEffects&quot;: [&quot;*.css&quot;, &quot;*.less&quot;]</code> ä¸ä¼šå¯¹css/lessæ–‡ä»¶tree shakingå¤„ç†</p> <h4 id="_5-2-2-3-code-splitï¼ˆä»£ç åˆ†å‰²ï¼‰"><a href="#_5-2-2-3-code-splitï¼ˆä»£ç åˆ†å‰²ï¼‰" class="header-anchor">#</a> 5.2.2.3 code splitï¼ˆä»£ç åˆ†å‰²ï¼‰</h4> <p>ä»£ç åˆ†å‰²ã€‚å°†æ‰“åŒ…è¾“å‡ºçš„ä¸€ä¸ªå¤§çš„ bundle.js æ–‡ä»¶æ‹†åˆ†æˆå¤šä¸ªå°æ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥å¹¶è¡ŒåŠ è½½å¤šä¸ªæ–‡ä»¶ï¼Œæ¯”åŠ è½½ä¸€ä¸ªæ–‡ä»¶æ›´å¿«ã€‚</p> <p>1.å¤šå…¥å£æ‹†åˆ†</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>entry: {
    // å¤šå…¥å£ï¼šæœ‰ä¸€ä¸ªå…¥å£ï¼Œæœ€ç»ˆè¾“å‡ºå°±æœ‰ä¸€ä¸ªbundle
    index: './src/js/index.js',
    test: './src/js/test.js'
  },
  output: {
    // [name]ï¼šå–æ–‡ä»¶å
    filename: 'js/[name].[contenthash:10].js',
    path: resolve(__dirname, 'build')
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>2.optimizationï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>optimization: {
    splitChunks: {
      chunks: 'all'
    }
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>å°† node_modules ä¸­çš„ä»£ç å•ç‹¬æ‰“åŒ…ï¼ˆå¤§å°è¶…è¿‡30kbï¼‰</li> <li>è‡ªåŠ¨åˆ†æå¤šå…¥å£chunkä¸­ï¼Œæœ‰æ²¡æœ‰å…¬å…±çš„æ–‡ä»¶ã€‚å¦‚æœæœ‰ä¼šæ‰“åŒ…æˆå•ç‹¬ä¸€ä¸ªchunk(æ¯”å¦‚ä¸¤ä¸ªæ¨¡å—ä¸­éƒ½å¼•å…¥äº†jqueryä¼šè¢«æ‰“åŒ…æˆå•ç‹¬çš„æ–‡ä»¶)ï¼ˆå¤§å°è¶…è¿‡30kbï¼‰</li></ul> <p>3.import åŠ¨æ€å¯¼å…¥è¯­æ³•ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/*
  é€šè¿‡jsä»£ç ï¼Œè®©æŸä¸ªæ–‡ä»¶è¢«å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªchunk
  importåŠ¨æ€å¯¼å…¥è¯­æ³•ï¼šèƒ½å°†æŸä¸ªæ–‡ä»¶å•ç‹¬æ‰“åŒ…(testæ–‡ä»¶ä¸ä¼šå’Œindexæ‰“åŒ…åœ¨åŒä¸€ä¸ªæ–‡ä»¶è€Œæ˜¯å•ç‹¬æ‰“åŒ…)
  webpackChunkName:æŒ‡å®štestå•ç‹¬æ‰“åŒ…åæ–‡ä»¶çš„åå­—
*/
import(/* webpackChunkName: 'test' */'./test')
  .then(({ mul, count }) =&gt; {
    // æ–‡ä»¶åŠ è½½æˆåŠŸ~
    // eslint-disable-next-line
    console.log(mul(2, 5));
  })
  .catch(() =&gt; {
    // eslint-disable-next-line
    console.log('æ–‡ä»¶åŠ è½½å¤±è´¥~');
  });
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_5-2-2-4-lazy-loadingï¼ˆæ‡’åŠ è½½-é¢„åŠ è½½ï¼‰"><a href="#_5-2-2-4-lazy-loadingï¼ˆæ‡’åŠ è½½-é¢„åŠ è½½ï¼‰" class="header-anchor">#</a> 5.2.2.4 lazy loadingï¼ˆæ‡’åŠ è½½/é¢„åŠ è½½ï¼‰</h4> <p>1.æ‡’åŠ è½½ï¼šå½“æ–‡ä»¶éœ€è¦ä½¿ç”¨æ—¶æ‰åŠ è½½ï¼ˆéœ€è¦ä»£ç åˆ†å‰²ï¼‰ã€‚ä½†æ˜¯å¦‚æœèµ„æºè¾ƒå¤§ï¼ŒåŠ è½½æ—¶é—´å°±ä¼šè¾ƒé•¿ï¼Œæœ‰å»¶è¿Ÿã€‚</p> <p>2.æ­£å¸¸åŠ è½½ï¼šå¯ä»¥è®¤ä¸ºæ˜¯å¹¶è¡ŒåŠ è½½ï¼ˆåŒä¸€æ—¶é—´åŠ è½½å¤šä¸ªæ–‡ä»¶ï¼‰æ²¡æœ‰å…ˆåé¡ºåºï¼Œå…ˆåŠ è½½äº†ä¸éœ€è¦çš„èµ„æºå°±ä¼šæµªè´¹æ—¶é—´ã€‚</p> <p>3.é¢„åŠ è½½ prefetchï¼ˆå…¼å®¹æ€§å¾ˆå·®ï¼‰ï¼šä¼šåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæå‰åŠ è½½ã€‚ç­‰å…¶ä»–èµ„æºåŠ è½½å®Œæ¯•ï¼Œæµè§ˆå™¨ç©ºé—²äº†ï¼Œå†å·å·åŠ è½½è¿™ä¸ªèµ„æºã€‚è¿™æ ·åœ¨ä½¿ç”¨æ—¶å·²ç»åŠ è½½å¥½äº†ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚æ‰€ä»¥åœ¨æ‡’åŠ è½½çš„åŸºç¡€ä¸ŠåŠ ä¸Šé¢„åŠ è½½ä¼šæ›´å¥½ã€‚</p> <p>ä»£ç ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>document.getElementById('btn').onclick = function() {
  // å°†importçš„å†…å®¹æ”¾åœ¨å¼‚æ­¥å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œtest.jsæ‰ä¼šè¢«åŠ è½½(ä¸ä¼šé‡å¤åŠ è½½)
  // webpackPrefetch: trueè¡¨ç¤ºå¼€å¯é¢„åŠ è½½
  import(/* webpackChunkName: 'test', webpackPrefetch: true */'./test').then(({ mul }) =&gt; {
    console.log(mul(4, 5));
  });
  import('./test').then(({ mul }) =&gt; {
    console.log(mul(2, 5))
  })
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_5-2-2-5-pwaï¼ˆç¦»çº¿å¯è®¿é—®æŠ€æœ¯ï¼‰"><a href="#_5-2-2-5-pwaï¼ˆç¦»çº¿å¯è®¿é—®æŠ€æœ¯ï¼‰" class="header-anchor">#</a> 5.2.2.5 pwaï¼ˆç¦»çº¿å¯è®¿é—®æŠ€æœ¯ï¼‰</h4> <p>pwaï¼šç¦»çº¿å¯è®¿é—®æŠ€æœ¯ï¼ˆæ¸è¿›å¼ç½‘ç»œå¼€å‘åº”ç”¨ç¨‹åºï¼‰ï¼Œä½¿ç”¨ serviceworker å’Œ workbox æŠ€æœ¯ã€‚ä¼˜ç‚¹æ˜¯ç¦»çº¿ä¹Ÿèƒ½è®¿é—®ï¼Œç¼ºç‚¹æ˜¯å…¼å®¹æ€§å·®ã€‚</p> <p>webpack.config.js ä¸­é…ç½®ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const WorkboxWebpackPlugin = require('workbox-webpack-plugin'); // å¼•å…¥æ’ä»¶

// pluginsä¸­åŠ å…¥ï¼š
new WorkboxWebpackPlugin.GenerateSW({
  /*
    1. å¸®åŠ©serviceworkerå¿«é€Ÿå¯åŠ¨
    2. åˆ é™¤æ—§çš„ serviceworker

    ç”Ÿæˆä¸€ä¸ª serviceworker é…ç½®æ–‡ä»¶
  */
  clientsClaim: true,
  skipWaiting: true
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>index.js ä¸­è¿˜éœ€è¦å†™ä¸€æ®µä»£ç æ¥æ¿€æ´»å®ƒçš„ä½¿ç”¨ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/*
  1. eslintä¸è®¤è¯† windowã€navigatorå…¨å±€å˜é‡
    è§£å†³ï¼šéœ€è¦ä¿®æ”¹package.jsonä¸­eslintConfigé…ç½®
    &quot;env&quot;: {
      &quot;browser&quot;: true // æ”¯æŒæµè§ˆå™¨ç«¯å…¨å±€å˜é‡
    }
  2. swä»£ç å¿…é¡»è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Š
    --&gt; nodejs
    æˆ–--&gt;
      npm i serve -g
      serve -s build å¯åŠ¨æœåŠ¡å™¨ï¼Œå°†æ‰“åŒ…è¾“å‡ºçš„buildç›®å½•ä¸‹æ‰€æœ‰èµ„æºä½œä¸ºé™æ€èµ„æºæš´éœ²å‡ºå»
*/
if ('serviceWorker' in navigator) { // å¤„ç†å…¼å®¹æ€§é—®é¢˜
  window.addEventListener('load', () =&gt; {
    navigator.serviceWorker
      .register('/service-worker.js') // æ³¨å†ŒserviceWorker
      .then(() =&gt; {
        console.log('swæ³¨å†ŒæˆåŠŸäº†~');
      })
      .catch(() =&gt; {
        console.log('swæ³¨å†Œå¤±è´¥äº†~');
      });
  });
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h1 id="å…­ã€webpack-é…ç½®è¯¦æƒ…"><a href="#å…­ã€webpack-é…ç½®è¯¦æƒ…" class="header-anchor">#</a> å…­ã€Webpack é…ç½®è¯¦æƒ…</h1> <h2 id="_6-1-entry"><a href="#_6-1-entry" class="header-anchor">#</a> 6.1 entry</h2> <p>entry: å…¥å£èµ·ç‚¹</p> <ol><li><p>string --&gt; './src/index.js'ï¼Œå•å…¥å£</p> <p>æ‰“åŒ…å½¢æˆä¸€ä¸ª chunkã€‚ è¾“å‡ºä¸€ä¸ª bundle æ–‡ä»¶ã€‚æ­¤æ—¶ chunk çš„åç§°é»˜è®¤æ˜¯ main</p></li> <li><p>array --&gt; ['./src/index.js', './src/add.js']ï¼Œå¤šå…¥å£</p> <p>æ‰€æœ‰å…¥å£æ–‡ä»¶æœ€ç»ˆåªä¼šå½¢æˆä¸€ä¸ª chunkï¼Œè¾“å‡ºå‡ºå»åªæœ‰ä¸€ä¸ª bundle æ–‡ä»¶ã€‚</p> <p>ï¼ˆä¸€èˆ¬åªç”¨åœ¨ HMR åŠŸèƒ½ä¸­è®© html çƒ­æ›´æ–°ç”Ÿæ•ˆï¼‰</p></li> <li><p>objectï¼Œå¤šå…¥å£</p> <p>æœ‰å‡ ä¸ªå…¥å£æ–‡ä»¶å°±å½¢æˆå‡ ä¸ª chunkï¼Œè¾“å‡ºå‡ ä¸ª bundle æ–‡ä»¶ï¼Œæ­¤æ—¶ chunk çš„åç§°æ˜¯ key å€¼</p></li></ol> <p>--&gt; ç‰¹æ®Šç”¨æ³•ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>entry: {
  // æœ€ç»ˆåªä¼šå½¢æˆä¸€ä¸ªchunk, è¾“å‡ºå‡ºå»åªæœ‰ä¸€ä¸ªbundleæ–‡ä»¶ã€‚
  index: ['./src/index.js', './src/count.js'], 
  // å½¢æˆä¸€ä¸ªchunkï¼Œè¾“å‡ºä¸€ä¸ªbundleæ–‡ä»¶ã€‚
  add: './src/add.js'
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_6-2-output"><a href="#_6-2-output" class="header-anchor">#</a> 6.2 output</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>output: {
  // æ–‡ä»¶åç§°ï¼ˆæŒ‡å®šåç§°+ç›®å½•ï¼‰
  filename: 'js/[name].js',
  // è¾“å‡ºæ–‡ä»¶ç›®å½•ï¼ˆå°†æ¥æ‰€æœ‰èµ„æºè¾“å‡ºçš„å…¬å…±ç›®å½•ï¼‰
  path: resolve(__dirname, 'build'),
  // æ‰€æœ‰èµ„æºå¼•å…¥å…¬å…±è·¯å¾„å‰ç¼€ --&gt; 'imgs/a.jpg' --&gt; '/imgs/a.jpg'
  publicPath: '/',
  chunkFilename: 'js/[name]_chunk.js', // æŒ‡å®šéå…¥å£chunkçš„åç§°
  library: '[name]', // æ‰“åŒ…æ•´ä¸ªåº“åå‘å¤–æš´éœ²çš„å˜é‡å
  libraryTarget: 'window' // å˜é‡åæ·»åŠ åˆ°å“ªä¸ªä¸Š browserï¼šwindow
  // libraryTarget: 'global' // nodeï¼šglobal
  // libraryTarget: 'commonjs' // conmmonjsæ¨¡å— exports
},
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_6-3-module"><a href="#_6-3-module" class="header-anchor">#</a> 6.3 module</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>module: {
  rules: [
    // loaderçš„é…ç½®
    {
      test: /\.css$/,
      // å¤šä¸ªloaderç”¨use
      use: ['style-loader', 'css-loader']
    },
    {
      test: /\.js$/,
      // æ’é™¤node_modulesä¸‹çš„jsæ–‡ä»¶
      exclude: /node_modules/,
      // åªæ£€æŸ¥srcä¸‹çš„jsæ–‡ä»¶
      include: resolve(__dirname, 'src'),
      enforce: 'pre', // ä¼˜å…ˆæ‰§è¡Œ
      // enforce: 'post', // å»¶åæ‰§è¡Œ
      // å•ä¸ªloaderç”¨loader
      loader: 'eslint-loader',
      options: {} // æŒ‡å®šé…ç½®é€‰é¡¹
    },
    {
      // ä»¥ä¸‹é…ç½®åªä¼šç”Ÿæ•ˆä¸€ä¸ª
      oneOf: []
    }
  ]
},
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_6-4-resolve"><a href="#_6-4-resolve" class="header-anchor">#</a> 6.4 resolve</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>// è§£ææ¨¡å—çš„è§„åˆ™
resolve: {
  // é…ç½®è§£ææ¨¡å—è·¯å¾„åˆ«å: ä¼˜ç‚¹ï¼šå½“ç›®å½•å±‚çº§å¾ˆå¤æ‚æ—¶ï¼Œç®€å†™è·¯å¾„ï¼›ç¼ºç‚¹ï¼šè·¯å¾„ä¸ä¼šæç¤º
  alias: {
    $css: resolve(__dirname, 'src/css')
  },
  // é…ç½®çœç•¥æ–‡ä»¶è·¯å¾„çš„åç¼€åï¼ˆå¼•å…¥æ—¶å°±å¯ä»¥ä¸å†™æ–‡ä»¶åç¼€åäº†ï¼‰
  extensions: ['.js', '.json', '.jsx', '.css'],
  // å‘Šè¯‰ webpack è§£ææ¨¡å—åº”è¯¥å»æ‰¾å“ªä¸ªç›®å½•
  modules: [resolve(__dirname, '../../node_modules'), 'node_modules']
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿™æ ·é…ç½®åï¼Œå¼•å…¥æ–‡ä»¶å°±å¯ä»¥è¿™æ ·ç®€å†™ï¼š<code>import '$css/index';</code></p> <h2 id="_6-5-dev-server"><a href="#_6-5-dev-server" class="header-anchor">#</a> 6.5 dev server</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>devServer: {
  // è¿è¡Œä»£ç æ‰€åœ¨çš„ç›®å½•
  contentBase: resolve(__dirname, 'build'),
  // ç›‘è§†contentBaseç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸€æ—¦æ–‡ä»¶å˜åŒ–å°±ä¼šreload
  watchContentBase: true,
  watchOptions: {
    // å¿½ç•¥æ–‡ä»¶
    ignored: /node_modules/
  },
  // å¯åŠ¨gzipå‹ç¼©
  compress: true,
  // ç«¯å£å·
  port: 5000,
  // åŸŸå
  host: 'localhost',
  // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
  open: true,
  // å¼€å¯HMRåŠŸèƒ½
  hot: true,
  // ä¸è¦æ˜¾ç¤ºå¯åŠ¨æœåŠ¡å™¨æ—¥å¿—ä¿¡æ¯
  clientLogLevel: 'none',
  // é™¤äº†ä¸€äº›åŸºæœ¬ä¿¡æ¯å¤–ï¼Œå…¶ä»–å†…å®¹éƒ½ä¸è¦æ˜¾ç¤º
  quiet: true,
  // å¦‚æœå‡ºé”™äº†ï¼Œä¸è¦å…¨å±æç¤º
  overlay: false,
  // æœåŠ¡å™¨ä»£ç†ï¼Œ--&gt; è§£å†³å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜
  proxy: {
    // ä¸€æ—¦devServer(5000)æœåŠ¡å™¨æ¥æ”¶åˆ°/api/xxxçš„è¯·æ±‚ï¼Œå°±ä¼šæŠŠè¯·æ±‚è½¬å‘åˆ°å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨3000
    '/api': {
      target: 'http://localhost:3000',
      // å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è·¯å¾„é‡å†™ï¼šå°†/api/xxx --&gt; /xxx ï¼ˆå»æ‰/apiï¼‰
      pathRewrite: {
        '^/api': ''
      }
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>å…¶ä¸­ï¼Œè·¨åŸŸé—®é¢˜ï¼šåŒæºç­–ç•¥ä¸­ä¸åŒçš„åè®®ã€ç«¯å£å·ã€åŸŸåå°±ä¼šäº§ç”Ÿè·¨åŸŸã€‚</p> <p>æ­£å¸¸çš„æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´æœ‰è·¨åŸŸï¼Œä½†æ˜¯æœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰è·¨åŸŸã€‚ä»£ç é€šè¿‡ä»£ç†æœåŠ¡å™¨è¿è¡Œï¼Œæ‰€ä»¥æµè§ˆå™¨å’Œä»£ç†æœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰è·¨åŸŸï¼Œæµè§ˆå™¨æŠŠè¯·æ±‚å‘é€åˆ°ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œä»£ç†æœåŠ¡å™¨æ›¿ä½ è½¬å‘åˆ°å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰è·¨åŸŸï¼Œæ‰€ä»¥è¯·æ±‚æˆåŠŸã€‚ä»£ç†æœåŠ¡å™¨å†æŠŠæ¥æ”¶åˆ°çš„å“åº”å“åº”ç»™æµè§ˆå™¨ã€‚è¿™æ ·å°±è§£å†³å¼€å‘ç¯å¢ƒä¸‹çš„è·¨åŸŸé—®é¢˜ã€‚</p> <h2 id="_6-6-optimization"><a href="#_6-6-optimization" class="header-anchor">#</a> 6.6 optimization</h2> <p>contenthash ç¼“å­˜ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šä¿®æ”¹ a æ–‡ä»¶å¯¼è‡´ b æ–‡ä»¶ contenthash å˜åŒ–ã€‚
å› ä¸ºåœ¨ index.js ä¸­å¼•å…¥ a.jsï¼Œæ‰“åŒ…å index.js ä¸­è®°å½•äº† a.js çš„ hash å€¼ï¼Œè€Œ a.js æ”¹å˜ï¼Œå…¶é‡æ–°æ‰“åŒ…åçš„ hash æ”¹å˜ï¼Œå¯¼è‡´ index.js æ–‡ä»¶å†…å®¹ä¸­è®°å½•çš„ a.js çš„ hash ä¹Ÿæ”¹å˜ï¼Œä»è€Œé‡æ–°æ‰“åŒ…å index.js çš„ hash å€¼ä¹Ÿä¼šå˜ï¼Œè¿™æ ·å°±ä¼šä½¿ç¼“å­˜å¤±æ•ˆã€‚ï¼ˆæ”¹å˜çš„æ˜¯a.jsæ–‡ä»¶ä½†æ˜¯ index.js æ–‡ä»¶çš„ hash å€¼ä¹Ÿæ”¹å˜äº†ï¼‰
è§£å†³åŠæ³•ï¼šruntimeChunk --&gt; å°†å½“å‰æ¨¡å—è®°å½•å…¶ä»–æ¨¡å—çš„ hash å•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ runtimeï¼Œè¿™æ · a.js çš„ hash æ”¹å˜åªä¼šå½±å“ runtime æ–‡ä»¶ï¼Œä¸ä¼šå½±å“åˆ° index.js æ–‡ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>output: {
  filename: 'js/[name].[contenthash:10].js',
  path: resolve(__dirname, 'build'),
  chunkFilename: 'js/[name].[contenthash:10]_chunk.js' // æŒ‡å®šéå…¥å£æ–‡ä»¶çš„å…¶ä»–chunkçš„åå­—åŠ _chunk
},
optimization: {
  splitChunks: {
    chunks: 'all',
    /* ä»¥ä¸‹éƒ½æ˜¯splitChunksé»˜è®¤é…ç½®ï¼Œå¯ä»¥ä¸å†™
    miniSize: 30 * 1024, // åˆ†å‰²çš„chunkæœ€å°ä¸º30kbï¼ˆå¤§äº30kbçš„æ‰åˆ†å‰²ï¼‰
    maxSize: 0, // æœ€å¤§æ²¡æœ‰é™åˆ¶
    minChunks: 1, // è¦æå–çš„chunkæœ€å°‘è¢«å¼•ç”¨1æ¬¡
    maxAsyncRequests: 5, // æŒ‰éœ€åŠ è½½æ—¶å¹¶è¡ŒåŠ è½½çš„æ–‡ä»¶çš„æœ€å¤§æ•°é‡ä¸º5
    maxInitialRequests: 3, // å…¥å£jsæ–‡ä»¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°é‡
    automaticNameDelimiter: '~', // åç§°è¿æ¥ç¬¦
    name: true, // å¯ä»¥ä½¿ç”¨å‘½åè§„åˆ™
    cacheGroups: { // åˆ†å‰²chunkçš„ç»„
      vendors: {
        // node_modulesä¸­çš„æ–‡ä»¶ä¼šè¢«æ‰“åŒ…åˆ°vendorsç»„çš„chunkä¸­ï¼Œ--&gt; vendors~xxx.js
        // æ»¡è¶³ä¸Šé¢çš„å…¬å…±è§„åˆ™ï¼Œå¤§å°è¶…è¿‡30kbã€è‡³å°‘è¢«å¼•ç”¨ä¸€æ¬¡
        test: /[\\/]node_modules[\\/]/,
        // ä¼˜å…ˆçº§
        priority: -10
      },
      default: {
        // è¦æå–çš„chunkæœ€å°‘è¢«å¼•ç”¨2æ¬¡
        minChunks: 2,
        prority: -20,
        // å¦‚æœå½“å‰è¦æ‰“åŒ…çš„æ¨¡å—å’Œä¹‹å‰å·²ç»è¢«æå–çš„æ¨¡å—æ˜¯åŒä¸€ä¸ªï¼Œå°±ä¼šå¤ç”¨ï¼Œè€Œä¸æ˜¯é‡æ–°æ‰“åŒ…
        reuseExistingChunk: true
      }
    } */
  },
  // å°†index.jsè®°å½•çš„a.jsçš„hashå€¼å•ç‹¬æ‰“åŒ…åˆ°runtimeæ–‡ä»¶ä¸­
  runtimeChunk: {
    name: entrypoint =&gt; `runtime-${entrypoint.name}`
  },
  minimizer: [
    // é…ç½®ç”Ÿäº§ç¯å¢ƒçš„å‹ç¼©æ–¹æ¡ˆï¼šjs/css
    new TerserWebpackPlugin({
      // å¼€å¯ç¼“å­˜
      cache: true,
      // å¼€å¯å¤šè¿›ç¨‹æ‰“åŒ…
      parallel: true,
      // å¯ç”¨sourceMap(å¦åˆ™ä¼šè¢«å‹ç¼©æ‰)
      sourceMap: true
    })
  ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h1 id="ä¸ƒã€webpack5-ä»‹ç»å’Œä½¿ç”¨"><a href="#ä¸ƒã€webpack5-ä»‹ç»å’Œä½¿ç”¨" class="header-anchor">#</a> ä¸ƒã€Webpack5 ä»‹ç»å’Œä½¿ç”¨</h1> <p>æ­¤ç‰ˆæœ¬é‡ç‚¹å…³æ³¨ä»¥ä¸‹å†…å®¹:</p> <ul><li>é€šè¿‡æŒä¹…ç¼“å­˜æé«˜æ„å»ºæ€§èƒ½.</li> <li>ä½¿ç”¨æ›´å¥½çš„ç®—æ³•å’Œé»˜è®¤å€¼æ¥æ”¹å–„é•¿æœŸç¼“å­˜.</li> <li>é€šè¿‡æ›´å¥½çš„æ ‘æ‘‡å’Œä»£ç ç”Ÿæˆæ¥æ”¹å–„æ†ç»‘åŒ…å¤§å°.</li> <li>æ¸…é™¤å¤„äºæ€ªå¼‚çŠ¶æ€çš„å†…éƒ¨ç»“æ„ï¼ŒåŒæ—¶åœ¨ v4 ä¸­å®ç°åŠŸèƒ½è€Œä¸å¼•å…¥ä»»ä½•é‡å¤§æ›´æ”¹.</li> <li>é€šè¿‡å¼•å…¥é‡å¤§æ›´æ”¹æ¥ä¸ºå°†æ¥çš„åŠŸèƒ½åšå‡†å¤‡ï¼Œä»¥ä½¿æˆ‘ä»¬èƒ½å¤Ÿå°½å¯èƒ½é•¿æ—¶é—´åœ°ä½¿ç”¨ v5.</li></ul> <h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="header-anchor">#</a> ä¸‹è½½</h2> <p>npm i webpack@next webpack-cli -D</p> <h2 id="è‡ªåŠ¨åˆ é™¤-node-js-polyfills"><a href="#è‡ªåŠ¨åˆ é™¤-node-js-polyfills" class="header-anchor">#</a> è‡ªåŠ¨åˆ é™¤ Node.js Polyfills</h2> <p>æ—©æœŸï¼Œwebpack çš„ç›®æ ‡æ˜¯å…è®¸åœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¤§å¤šæ•° node.js æ¨¡å—ï¼Œä½†æ˜¯æ¨¡å—æ ¼å±€å‘ç”Ÿäº†å˜åŒ–ï¼Œè®¸å¤šæ¨¡å—ç”¨é€”ç°åœ¨ä¸»è¦æ˜¯ä¸ºå‰ç«¯ç›®çš„è€Œç¼–å†™çš„ã€‚webpack &lt;= 4 é™„å¸¦äº†è®¸å¤š node.js æ ¸å¿ƒæ¨¡å—çš„ polyfillï¼Œä¸€æ—¦æ¨¡å—ä½¿ç”¨ä»»ä½•æ ¸å¿ƒæ¨¡å—ï¼ˆå³ crypto æ¨¡å—ï¼‰ï¼Œè¿™äº›æ¨¡å—å°±ä¼šè‡ªåŠ¨åº”ç”¨ã€‚</p> <p>å°½ç®¡è¿™ä½¿ä½¿ç”¨ä¸º node.js ç¼–å†™çš„æ¨¡å—å˜å¾—å®¹æ˜“ï¼Œä½†å®ƒä¼šå°†è¿™äº›å·¨å¤§çš„ polyfill æ·»åŠ åˆ°åŒ…ä¸­ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™äº› polyfill æ˜¯ä¸å¿…è¦çš„ã€‚</p> <p>webpack 5 ä¼šè‡ªåŠ¨åœæ­¢å¡«å……è¿™äº›æ ¸å¿ƒæ¨¡å—ï¼Œå¹¶ä¸“æ³¨äºä¸å‰ç«¯å…¼å®¹çš„æ¨¡å—ã€‚</p> <p>è¿ç§»ï¼š</p> <ul><li>å°½å¯èƒ½å°è¯•ä½¿ç”¨ä¸å‰ç«¯å…¼å®¹çš„æ¨¡å—ã€‚</li> <li>å¯ä»¥ä¸º node.js æ ¸å¿ƒæ¨¡å—æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª polyfillã€‚é”™è¯¯æ¶ˆæ¯å°†æç¤ºå¦‚ä½•å®ç°è¯¥ç›®æ ‡ã€‚</li></ul> <p>Chunk å’Œæ¨¡å— ID</p> <p>æ·»åŠ äº†ç”¨äºé•¿æœŸç¼“å­˜çš„æ–°ç®—æ³•ã€‚åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹é»˜è®¤æƒ…å†µä¸‹å¯ç”¨è¿™äº›åŠŸèƒ½ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>chunkIds: &quot;deterministic&quot;, moduleIds: &quot;deterministic&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="chunk-id"><a href="#chunk-id" class="header-anchor">#</a> Chunk ID</h2> <p>ä½ å¯ä»¥ä¸ç”¨ä½¿ç”¨ <code>import(/* webpackChunkName: &quot;name&quot; */ &quot;module&quot;)</code> åœ¨å¼€å‘ç¯å¢ƒæ¥ä¸º chunk å‘½åï¼Œç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯æœ‰å¿…è¦çš„</p> <p>webpack å†…éƒ¨æœ‰ chunk å‘½åè§„åˆ™ï¼Œä¸å†æ˜¯ä»¥ id(0, 1, 2)å‘½åäº†</p> <h2 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree Shaking</h2> <ol><li>webpack ç°åœ¨èƒ½å¤Ÿå¤„ç†å¯¹åµŒå¥—æ¨¡å—çš„ tree shaking</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>// inner.js
export const a = 1;
export const b = 2;

// module.js
import * as inner from './inner';
export { inner };

// user.js
import * as module from './module';
console.log(module.inner.a);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­, inner æ¨¡å—æš´éœ²çš„ <code>b</code> ä¼šè¢«åˆ é™¤</p> <ol><li>webpack ç°åœ¨èƒ½å¤Ÿå¤šä¸ªæ¨¡å—ä¹‹å‰çš„å…³ç³»</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>import { something } from './something';

function usingSomething() {
  return something;
}

export function test() {
  return usingSomething();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å½“è®¾ç½®äº†<code>&quot;sideEffects&quot;: false</code>æ—¶ï¼Œä¸€æ—¦å‘ç°<code>test</code>æ–¹æ³•æ²¡æœ‰ä½¿ç”¨ï¼Œä¸ä½†åˆ é™¤<code>test</code>ï¼Œè¿˜ä¼šåˆ é™¤<code>&quot;./something&quot;</code></p> <ol><li>webpack ç°åœ¨èƒ½å¤„ç†å¯¹ Commonjs çš„ tree shaking</li></ol> <h2 id="output"><a href="#output" class="header-anchor">#</a> Output</h2> <p>webpack 4 é»˜è®¤åªèƒ½è¾“å‡º ES5 ä»£ç </p> <p>webpack 5 å¼€å§‹æ–°å¢ä¸€ä¸ªå±æ€§ output.ecmaVersion, å¯ä»¥ç”Ÿæˆ ES5 å’Œ ES6 / ES2015 ä»£ç .</p> <p>å¦‚ï¼š<code>output.ecmaVersion: 2015</code></p> <p>SplitChunk</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// webpack4
minSize: 30000;
// webpack5
minSize: {
  javascript: 30000,
  style: 50000,
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="caching"><a href="#caching" class="header-anchor">#</a> Caching</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>// é…ç½®ç¼“å­˜
cache: {
  // ç£ç›˜å­˜å‚¨
  type: &quot;filesystem&quot;,
  buildDependencies: {
    // å½“é…ç½®ä¿®æ”¹æ—¶ï¼Œç¼“å­˜å¤±æ•ˆ
    config: [__filename]
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç¼“å­˜å°†å­˜å‚¨åˆ° <code>node_modules/.cache/webpack</code></p> <h2 id="ç›‘è§†è¾“å‡ºæ–‡ä»¶"><a href="#ç›‘è§†è¾“å‡ºæ–‡ä»¶" class="header-anchor">#</a> ç›‘è§†è¾“å‡ºæ–‡ä»¶</h2> <p>ä¹‹å‰ webpack æ€»æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ„å»ºæ—¶è¾“å‡ºå…¨éƒ¨æ–‡ä»¶ï¼Œä½†æ˜¯ç›‘è§†é‡æ–°æ„å»ºæ—¶ä¼šåªæ›´æ–°ä¿®æ”¹çš„æ–‡ä»¶ã€‚</p> <p>æ­¤æ¬¡æ›´æ–°åœ¨ç¬¬ä¸€æ¬¡æ„å»ºæ—¶ä¼šæ‰¾åˆ°è¾“å‡ºæ–‡ä»¶çœ‹æ˜¯å¦æœ‰å˜åŒ–ï¼Œä»è€Œå†³å®šè¦ä¸è¦è¾“å‡ºå…¨éƒ¨æ–‡ä»¶ã€‚</p> <h2 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="header-anchor">#</a> é»˜è®¤å€¼</h2> <ul><li><code>entry: &quot;./src/index.js</code></li> <li><code>output.path: path.resolve(__dirname, &quot;dist&quot;)</code></li> <li><code>output.filename: &quot;[name].js&quot;</code></li></ul></div> <footer class="page-edit" style="display:none;"><div class="edit-link"><a href="https://github.com/Catnesam/blog/edit/master/docs/views/front-end/webpack.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°: </span> <span class="time">2021/02/25, 11:02:00</span></div></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" style="display:none;" data-v-0b87bb44><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div><!----><div data-v-48108b4c><div class="DetailsOpenFlag" style="right:1rem;bottom:9rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;font-size:14px;font-weight:500;display:none;" data-v-48108b4c>
 å±•å¼€ 

</div></div></div></div>
    <script src="/blog/assets/js/app.90f6b5bc.js" defer></script><script src="/blog/assets/js/5.e94a5d1b.js" defer></script><script src="/blog/assets/js/1.d02e55e0.js" defer></script><script src="/blog/assets/js/2.fb73c2a5.js" defer></script><script src="/blog/assets/js/28.ce003a28.js" defer></script><script src="/blog/assets/js/19.1644d39f.js" defer></script>
  </body>
</html>
